<script setup>
import { onMounted, ref } from "vue";

const tgReady = ref(false);
const userText = ref("Ù†Ø§Ù…Ø´Ø®Øµ");

onMounted(() => {
  const tg = window.Telegram?.WebApp;
  if (!tg) return;

  tg.ready();
  tg.expand();

  const user = tg.initDataUnsafe?.user;
  if (user) {
    userText.value = user.username ? `@${user.username}` : (user.first_name || "User");
  }
  tgReady.value = true;
});

function submitForm(e) {
  e.preventDefault();
  alert("ÙØ¹Ù„Ø§Ù‹ ÙÙ‚Ø· UI Ù‡Ø³Øª âœ… Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ Ø¨Ù‡ Ø¨Ú©â€ŒØ§Ù†Ø¯ ÙˆØµÙ„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…");
}
</script>

<template>
  <div style="font-family: sans-serif; padding: 16px; max-width: 600px; margin: 0 auto;">
    <h2>ğŸ“© Abad WebApp</h2>

    <div v-if="!tgReady" style="padding: 12px; border: 1px solid #ddd; border-radius: 12px;">
      <p>Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø§Ù„Ø§Ù† Ø¯Ø§Ø®Ù„ Ù…Ø±ÙˆØ±Ú¯Ø± Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ø¨Ø§Ø² Ø´Ø¯Ù‡.</p>
      <p style="opacity: 0.7;">
        Ø¨Ø±Ø§ÛŒ ØªØ³Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø¯Ø§Ø®Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† WebApp Ø¨Ø§Ø²Ø´ Ú©Ù†ÛŒÙ….
      </p>
    </div>

    <div v-else style="padding: 12px; border: 1px solid #ddd; border-radius: 12px;">
      <p><b>âœ… Ø¯Ø§Ø®Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø¬Ø±Ø§ Ø´Ø¯</b></p>
      <p>Ú©Ø§Ø±Ø¨Ø±: <b>{{ userText }}</b></p>
    </div>

    <hr style="margin: 16px 0;" />

    <h3>ÙØ±Ù… Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª (MVP)</h3>

    <form @submit="submitForm" style="display: grid; gap: 10px;">
      <label>
        Ù†ÙˆØ¹ Ø¯Ø±Ø®ÙˆØ§Ø³Øª
        <select style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd;">
          <option>Apple ID</option>
          <option>License/Credit</option>
          <option>Registration</option>
          <option>Telegram Premium</option>
          <option>VPS</option>
          <option>Subscription</option>
          <option>Other</option>
        </select>
      </label>

      <label>
        ØªÙˆØ¶ÛŒØ­Ø§Øª
        <textarea
          rows="4"
          placeholder="Ù…ØªÙ† Ø®Ø·Ø§ / ØªÙˆØ¶ÛŒØ­ Ù…Ø´Ú©Ù„"
          style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd;"
        ></textarea>
      </label>

      <label>
        Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„/Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª
        <input type="file" style="width: 100%;" />
      </label>

      <button
        type="submit"
        style="padding: 12px; border-radius: 12px; border: none; cursor: pointer; font-weight: 700;"
      >
        Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª
      </button>
    </form>
  </div>
</template>
